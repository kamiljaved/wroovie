{% extends "blog/base.html" %}
{% load crispy_forms_tags  %}

{% block content %}

    <h1>thisBlog Profile</h1>
    <br />

    <div class="content-section">
        <div class="media">
            <img class="rounded-circle account-img" src="{{ user.profile.image.url }}">
            <div class="media-body">
                <h2 class="account-heading">
                    {{ user.username }}
                </h2>
                <p class="text-secondary">{{ user.email }}</p>
                <a class="btn btn-info disabled btn-lg mt-1 mb-1" style="color: white;"> 
                        {% with user.profile.user_status as status %}
                            {% if status == 1 %} Student
                            {% elif status == 2 %} Instructor
                            {% elif status == 3 %} Admin
                            {% endif %}
                        {% endwith %}
                </a>
            </div>
        </div>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Profile Info</legend>
                {{ u_form|crispy }}
                {{ p_form|crispy }}
            </fieldset>
            <div class="form-group">
                <button class="btn btn-outline-info" type="submit">Update</button>
            </div>
        </form>
    </div>

{% endblock content %}

{% block optionbar %}
<div class="content-section">
    <h3>User Options</h3>
    <p class='text-muted'>
    <ul class="list-group">
        {% if user.profile.user_status == 1 and not user.profile.PENDING_REQUEST_BECOME_INSTRUCTOR %}
        <a href="{% url 'user-upgrade' user.username user.profile.user_status %}"><li class="list-group-item list-group-item-light">Apply to become an Instructor</li></a>
        {% endif %}
        {% if user.profile.user_status == 2 and not user.profile.PENDING_REQUEST_BECOME_ADMIN %}
        <li class="list-group-item list-group-item-light">Apply to become an Admin</li>
        {% endif %}
        {% if not user.profile.PENDING_REQUEST_CHANGE_PASSWORD %}
        <li class="list-group-item list-group-item-light">Change my Password</li>
        {% endif %}
        <li class="list-group-item list-group-item-light">Delete Account</li>
    </ul>
    </p>
</div>
{% endblock %}